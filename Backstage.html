<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8" crossorigin="anonymous"></script>
    <title>评论管理系统</title>
</head> 
    <header>
        <div class="navbar">
            <div class="profileimg">
                <div class="img">
                <h1 style=color:#000000;>Admin</h1><img src="images/newlogo_有顏色粗線條_黃色_圓形.png" alt="logo"></div>
            </div>
        </div>
    </header>
<body>
   
    <style>
        body{
            margin: 0;
        }
        .navbar{
            width: 100%;
            height: auto;
         background: linear-gradient(to right, #F6416C, #FFF6B7);
             background-repeat: no-repeat;
            padding: 4px;
            display: flex;
            flex-direction: row-reverse;
        }
        .profileimg{
            display: flex;
        }
        .img{
             display: flex;
            float: right;
        }
        .img img{
            width: 40px;
            object-fit: contain;
        }
        /* 去除列表项的圆点 */
        #comment-list {
            list-style-type: none;
            padding: 0;
        }

        /* 样式化每个评论项 */
        #comment-list li {
            margin-bottom: 10px;
        }
        .comment-manager{
               background-color: #f2f2f2;
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ccc;
        }
        #comment-list li {
        /* 选择所有 #comment-list 下的 li 元素 */
        margin-bottom: 10px; /* 可根据需要调整评论项之间的间距 */
        padding: 5px; /* 可根据需要调整评论项内的内边距 */
        border: 3px solid #ddd;
        background-color: #f2f2f2;
        }
        .d-flex {
            width: 100%;
            height:auto;
            margin-bottom: 5px;
            
        }
        .nav {
            width: 10%;
            height:90vh;
            padding: 0;
            margin: 0;
            background-color: black;
            
        }
        .tab-content{
            width: 90%;
        }
        table {
            border-collapse: collapse;
            width: 60%;
            margin: 20px;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: center;
        }

        th {
            background-color: #f2f2f2;
        }
    </style>
    
    <div class="d-flex align-items-start">
  <div class="nav flex-column nav-pills me-3" id="v-pills-tab" role="tablist" aria-orientation="vertical">
    <button class="nav-link active" id="v-pills-home-tab" data-bs-toggle="pill" data-bs-target="#v-pills-home" type="button" role="tab" aria-controls="v-pills-home" aria-selected="true">首頁</button>
    <button class="nav-link" id="v-pills-profile-tab" data-bs-toggle="pill" data-bs-target="#v-pills-profile" type="button" role="tab" aria-controls="v-pills-profile" aria-selected="false">評論區審核</button>
    <button class="nav-link" id="v-pills-messages-tab" data-bs-toggle="pill" data-bs-target="#v-pills-messages" type="button" role="tab" aria-controls="v-pills-messages" aria-selected="false">資料管理</button>
  </div>
  <div class="tab-content" id="v-pills-tabContent">
    <div class="tab-pane fade show active" id="v-pills-home" role="tabpanel" aria-labelledby="v-pills-home-tab">
        <table>
        <tr>
            <th onclick="sortTable(0)">页面</th>
            <th onclick="sortTable(1)">点击次数</th>
        </tr>
        <tbody id="allClickCountsContainer"></tbody>
    </table>

      </div>
    <div class="tab-pane fade" id="v-pills-profile" role="tabpanel" aria-labelledby="v-pills-profile-tab"><div class="comment-manager" id="comment-management">
        <!-- 显示评论列表 -->
        <ul id="comment-list">
            <!-- 评论将在这里显示 -->
        </ul>
        
        <!-- 删除选中评论的按钮 -->
        <button onclick="deleteSelectedComments()">删除选中评论</button>
    </div></div>
    <div class="tab-pane fade" id="v-pills-messages" role="tabpanel" aria-labelledby="v-pills-messages-tab">...</div>
    <div class="tab-pane fade" id="v-pills-settings" role="tabpanel" aria-labelledby="v-pills-settings-tab">...</div>
  </div>
</div>
    
<!-- 用于显示点击次数的元素 -->
    <!-- 在特定页面上添加显示所有页面点击次数的逻辑 -->


<script>
  var allClickCounts = JSON.parse(localStorage.getItem('allClickCounts')) || {};
        var allClickCountsContainer = document.getElementById('allClickCountsContainer');

        // 将数据转换为数组
        var dataArray = Object.entries(allClickCounts).map(([page, count]) => ({ page, count }));

        // 初始渲染表格
        renderTable();

        // 排序函数
        function sortTable(columnIndex) {
            dataArray.sort((a, b) => a.count < b.count ? 1 : -1);
            renderTable();
        }

        // 渲染表格
        function renderTable() {
            allClickCountsContainer.innerHTML = '';
            dataArray.forEach(item => {
                var row = document.createElement('tr');
                row.innerHTML = `<td>${item.page}</td><td>${item.count} 次</td>`;
                allClickCountsContainer.appendChild(row);
            });
        }
        // 获取本地存储中的评论数据
        const comments = JSON.parse(localStorage.getItem('messages')) || [];

        // 在评论管理页面显示评论列表
        const commentListElement = document.getElementById('comment-list');

        comments.forEach((comment, index) => {
            const listItem = document.createElement('li');

            // 显示评论内容
            listItem.textContent = ` ${comment.message}`;

            // 创建复选框
            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.name = 'comment-checkbox';
            checkbox.value = index;
            listItem.appendChild(checkbox);

            commentListElement.appendChild(listItem);
        });

        // 删除选中评论的函数
        function deleteSelectedComments() {
            const checkboxes = document.getElementsByName('comment-checkbox');
            const selectedIndexes = Array.from(checkboxes)
                .filter(checkbox => checkbox.checked)
                .map(checkbox => parseInt(checkbox.value, 10));

            if (selectedIndexes.length > 0) {
                // 从数组中删除选中的评论
                selectedIndexes.sort((a, b) => b - a);
                selectedIndexes.forEach(index => {
                    comments.splice(index, 1);
                });

                // 更新本地存储
                localStorage.setItem('messages', JSON.stringify(comments));

                // 更新评论列表的显示
                updateCommentList();
            } else {
                alert('请选择要删除的评论');
            }
        }

        // 更新评论列表的显示
        function updateCommentList() {
            commentListElement.innerHTML = '';

            comments.forEach((comment, index) => {
                const listItem = document.createElement('li');

                // 显示评论内容
                listItem.textContent = `评论: ${comment.message}`;

                // 创建复选框
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.name = 'comment-checkbox';
                checkbox.value = index;
                listItem.appendChild(checkbox);

                commentListElement.appendChild(listItem);
            });
        }
    </script>
</body>
</html>

